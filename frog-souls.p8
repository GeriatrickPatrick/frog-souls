pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
    player_pos = {60, 60}
    directionMap = {{-1,0},{1,0},{0,-1},{0,1}}

end

//matrixes should be the same length
function addMatrixs(m1, m2)
    for c=1, #m1 do
        m1[c] = m1[c] + m2[c]
    end
    return m1
end

-->8
function _update()
    handle_movement()
end

function handle_movement()
    for b=0,4 do
        if btn(b) then
            player_pos = addMatrixs(player_pos, directionMap[b+1])
        end
    end
end

-->8
function _draw()
    cls()
    drawPlayer()
end

function drawPlayer()
    spr(0, player_pos[1], player_pos[2], 2, 2)
    drawBlackElement(drawMouth, 2)
end

function drawMouth ()
    spr(2, player_pos[1]+4, player_pos[2]+4)
end

//draw black elements: this can be refactored nicely
function drawBlackElement(func, c)
    palt(0, false)
    palt(c, true)
    func()
    palt(0, true)
    palt(c, false)
end

__gfx__
00033033000000000000222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00303030300000002000022200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00303030300000000000022200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03333333330000000000222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333000002222222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333000002222222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333000002222222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333000002222222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
